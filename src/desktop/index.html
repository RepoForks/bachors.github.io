<!DOCTYPE html>
<html>
    <head>
		<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
		<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
		<link type="text/css" rel="stylesheet" href="css/jquery.enhsplitter.css"/>
		<link type="text/css" rel="stylesheet" href="css/fba.css" />
		<link type="text/css" rel="stylesheet" href="css/ycp.css" />
		<link type="text/css" rel="stylesheet" href="css/scp.css" />
		<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.23.0/codemirror.min.css">
		<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.23.0/addon/dialog/dialog.min.css">
		<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.23.0/theme/material.min.css">
		<link type="text/css" rel="stylesheet" href="css/style.css" />
	</head>
    <body>
		<div id="screen">
			<div id="desktop">
				<a class="shorcut openapp" data-html="file"><span><i class="fa fa-file-code-o"></i></span><p>Code Editor</p></a>	
				<a class="shorcut openapp" data-html="console"><span><i class="fa fa-terminal"></i></span><p>Console</p></a>	
				<a class="shorcut openapp" data-html="internet"><span><i class="fa fa-globe"></i></span><p>Internet Explorer</p></a>
				<a class="shorcut openapp" data-html="music"><span><i class="fa fa-headphones"></i></span><p>Music Player</p></a>	
				<a class="shorcut openapp" data-html="video"><span><i class="fa fa-play-circle"></i></span><p>Video Player</p></a>
			</div>
			<div id="taskbar">
				<a href="https://github.com/bachors/HTML-Desktop-Template" target="_BLANK"><i class="fa fa-windows"></i></a>
				<span id="date"></span>
			</div>
		</div>
		
		<script src="//www.skulpt.org/static/skulpt.min.js" type="text/javascript"></script>
		<script src="//www.skulpt.org/static/skulpt-stdlib.js" type="text/javascript"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.23.0/codemirror.min.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.23.0/mode/xml/xml.min.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.23.0/mode/javascript/javascript.min.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.23.0/mode/css/css.min.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.23.0/mode/clike/clike.min.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.23.0/mode/php/php.min.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.23.0/mode/htmlmixed/htmlmixed.min.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.23.0/addon/dialog/dialog.min.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.23.0/addon/search/searchcursor.min.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/codemirror/5.23.0/addon/search/search.min.js"></script>
		<script type="text/javascript" src="//code.jquery.com/jquery-2.1.3.min.js"></script>
		<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
		<script src="js/jquery.enhsplitter.js"></script>
		<script src="js/fba.js"></script>
		<script src="js/ycp.js"></script>
		<script src="js/scp.js"></script>
		<script>
var html = {
	file: '<div class="window active" data-taskbar="file">' +
			'		<div class="toolbar">' +
			'			<div class="row">' +
			'				<i class="fa fa-code-fork"></i>' +
			'				<span id="rf"></span>' +
			'			</div><div class="row">' +
			'				<a class="panel close"><i class="fa fa-times"></i></a>' +
			'				<a class="panel maximize"><i class="fa fa-window-maximize"></i></a>' +
			'				<a class="panel minimize"><i class="fa fa-minus"></i></a>' +
			'			</div>' +
			'		</div>' +
			'		<div class="board"><div id="fba"></div></div>' +
			'	</div>',
	internet: '<div class="window active" data-taskbar="internet">' +
			'		<div class="toolbar">' +
			'			<div class="row">' +
			'				<i class="fa fa-globe"></i>' +
			'			</div><div class="row">' +
			'				<a class="panel close"><i class="fa fa-times"></i></a>' +
			'				<a class="panel maximize"><i class="fa fa-window-maximize"></i></a>' +
			'				<a class="panel minimize"><i class="fa fa-minus"></i></a>' +
			'			</div>' +
			'		</div>' +
			'		<div class="board"><div id="addressbar">' +
			'			<div class="input">' +
			'				<input type="url" id="addr" placeholder="URL">' +
			'			</div><div class="input">' +
			'				<input type="text" placeholder="Search">' +
			'			</div>' +
			'		</div>' +
			'		<div id="site"></div></div>' +
			'	</div>',
	video: '<div class="window active" data-taskbar="video">' +
			'		<div class="toolbar">' +
			'			<div class="row">' +
			'				<i class="fa fa-play-circle"></i> <span id="ycp-rf"></span>' +
			'			</div><div class="row">' +
			'				<a class="panel close"><i class="fa fa-times"></i></a>' +
			'				<a class="panel maximize"><i class="fa fa-window-maximize"></i></a>' +
			'				<a class="panel minimize"><i class="fa fa-minus"></i></a>' +
			'			</div>' +
			'		</div>' +
			'		<div class="board" style="background: #222"><div id="ycp" data-ycp_title="#Demo - iBacor.com" data-ycp_channel="UCoiS7s7HrE7bHNuzERi-FCQ"></div></div>' +
			'	</div>',
	console: '<div class="window active" data-taskbar="console">' +
			'		<div class="toolbar">' +
			'			<div class="row">' +
			'				<i class="fa fa-terminal"></i>' +
			'			</div><div class="row">' +
			'				<a class="panel close"><i class="fa fa-times"></i></a>' +
			'				<a class="panel maximize"><i class="fa fa-window-maximize"></i></a>' +
			'				<a class="panel minimize"><i class="fa fa-minus"></i></a>' +
			'			</div>' +
			'		</div>' +
			'		<div class="board"><textarea id="yourcode" autocorrect="off" spellcheck="false">-----------------------------------' +
'\nSkulpt Python\n' +
'-----------------------------------\n#>> print "Hello World"</textarea></div>' +
			'	</div>',
	music: '<div class="window active" data-taskbar="music">' +
			'		<div class="toolbar">' +
			'			<div class="row">' +
			'				<i class="fa fa-headphones"></i> <span id="scp-rf"></span>' +
			'			</div><div class="row">' +
			'				<a class="panel close"><i class="fa fa-times"></i></a>' +
			'				<a class="panel maximize"><i class="fa fa-window-maximize"></i></a>' +
			'				<a class="panel minimize"><i class="fa fa-minus"></i></a>' +
			'			</div>' +
			'		</div>' +
			'		<div class="board" style="background: #222"><div id="scp"></div></div>' +
			'	</div>'
}
		
$( function() { 
	$( ".openapp" ).click(function(){
		if($('.showing').length){
			$( ".showing" ).removeClass('active');
		}
		var data = $(this).data('html');
		if(!$('#taskbar .' + data).length){
			if($( ".window" )){
				$( ".window" ).removeClass('active');
			}
			$('#desktop').append(html[data]);
			if(data == 'file'){
				fba({github:{user:'bachors',repos:['jQuery-File-Browser-Awesome','CI-FIle-Browser-Awesome','jQuery-Github-Repos-Feed','jQuery-iBacor-Facebook-Streaming','jQuery-Github-Feed','jQuery-Youtube-Channels-Playlist','jQuery-Awesome-Sosmed-Share-Button','Apps-Screenshot','PHP-sending-emails-to-multiple-recipients','kodepos-indonesia.sql','Img2Blob.js','Imap_parser.php','Visitor-Parser-JS','Chat-Realtime','jQuery-Stackoverflow-Search','jQuery-Prefix-Input','GSM-Arena-API','bintangin.js','ChatWs','jQuery-my-instagram-gallery','Soundcloud-Player','HTTP-Compression-Tester','htmlfromrss.js','jQuery-Facebook-Fans-Page-Albums','Disqusin.js','CodingDong','jQuery-My-Dribbble-Gallery','jQuery-iBacor-Google-Plus-Streaming','TVTeditor','TMDb7','bcralnit.js']},mode:{html:'text/html',css:'text/css',js:'text/javascript',php:'application/x-httpd-php',json:'application/json'}});
			}else if(data == 'video'){
				$("#ycp").ycp({
					apikey : 'AIzaSyCj2GrDSBy6ISeGg3aWUM4mn3izlA1wgt0',
					autoplay : true
				});
			}else if(data == 'music'){
				scp(
					auto_play = true,
					client_id = '158d3e1ba760d77b323fdf7a79b77730'
				);
			}
			$('#taskbar').append('<a class="showing ' + data + ' active" data-minimize="yes">' + $(this).find('span').html() + '</a>');
			$( ".window" ).draggable({
				cancel: ".board"
			});
			$( ".window" ).resizable();
			return false;
		}
	}); 
	$( "body" ).on('click', '.window', function(){
		var data = $(this).data('taskbar');
		if($(this).hasClass("active") === false){
			$( ".window" ).removeClass('active');
			$( ".showing" ).removeClass('active');
			$(this).addClass('active');
			$('#taskbar .' + data).addClass('active');
		}
		return false;
	});
	$( "body" ).on('click', '.maximize', function(){
		$(this).removeClass('maximize');
		$(this).addClass('restore');
		$(this).find('i').removeClass('fa-window-maximize');
		$(this).find('i').addClass('fa-window-restore');
		$(this).parent().parent().parent().css('width', '100%');
		$(this).parent().parent().parent().css('top', '0px');
		$(this).parent().parent().parent().css('left', '0px');
		$(this).parent().parent().parent().css('height', '100%');
		return false;
	});
	$( "body" ).on('click', '.restore', function(){
		$(this).removeClass('restore');
		$(this).addClass('maximize');
		$(this).find('i').removeClass('fa-window-restore');
		$(this).find('i').addClass('fa-window-maximize');
		$(this).parent().parent().parent().css('width', '900px');
		$(this).parent().parent().parent().css('top', '50px');
		$(this).parent().parent().parent().css('left', '100px');
		$(this).parent().parent().parent().css('height', '500px');
		return false;
	});
	$( "body" ).on('click', '.close', function(){
		$(this).parent().parent().parent().remove();
		var i = $(this).parent().parent().parent().data('taskbar');
		$('#taskbar .' + i).remove();
		return false;
	});
	$( "body" ).on('click', '.minimize', function(){
		$(this).parent().parent().parent().hide();
		var i = $(this).parent().parent().parent().data('taskbar');
		$('#taskbar .' + i).removeClass('active');
		return false;
	});
	$( "body" ).on('click', '.showing', function(){
		var x = $(this).index() - 2;
		if($(this).data('minimize') == 'yes'){
			$('.window').eq(x).hide();
			$(this).data('minimize', 'no');
			$(this).removeClass('active');
		}else{
			$('.window').eq(x).show();
			$( ".window" ).removeClass('active');
			$('.window').eq(x).addClass('active');
			$(this).data('minimize', 'yes');
			$('.showing').removeClass('active');
			$(this).addClass('active');
		}
		return false;
	});
	$("body").on('keypress', '#addr', function(e){
		if (e.which == 13) {
			$('#site').html('<iframe id="loadurl"></iframe>');
			SetFrameURL($(this).val());
			return false; 
		}
	});
	$("body").on('keypress', '#yourcode', function(e){
		if (e.which == 13) {
			if(e.shiftKey){
				document.getElementById("yourcode").value += '\n';
			}else{
				document.getElementById("yourcode").value += '\n';
				var prog = document.getElementById("yourcode").value,
					code = prog.split('#>> ');
				runit(code[code.length - 1]);
				document.getElementById("yourcode").value += '\n#>> ';
			}
			return false; 
		}
	});
	
	setTimeout(tampilkanwaktu, 1000);
});

function tampilkanwaktu() {
    var sekarang = new Date();
    var detik = sekarang.getSeconds();
    var stringdetik = (detik < 10) ? "0" + (detik.toString()) : (detik.toString());
    var menit = sekarang.getMinutes();
    var stringmenit = (menit < 10) ? "0" + (menit.toString()) : (menit.toString());
    var jam = sekarang.getHours();
    var stringjam = (jam < 10) ? "0" + (jam.toString()) : (jam.toString());
	var dn="AM"
	if (stringjam>=12)
	dn="PM"
    $("#taskbar span").html(stringjam + ":" + stringmenit + " " + dn + "<br>" + sekarang.getDate() + "/" + sekarang.getMonth() + "/" + sekarang.getFullYear());
    setTimeout(tampilkanwaktu, 1000);
}

function SetFrameURL(addr) {
	if (addr.substring(0, 7) != "//" && addr.substring(0, 8) != "https://") addr = "//" + addr;
	var frame = document.getElementById('loadurl');
	frame.src = addr;
}

function outf(text) {
   var mypre = document.getElementById("yourcode");
   mypre.value += text;
}

function builtinRead(x)
{
    if (Sk.builtinFiles === undefined || Sk.builtinFiles["files"][x] === undefined)
        throw "File not found: '" + x + "'";
		
	
    return Sk.builtinFiles["files"][x];
}

function runit(prog) {   
	Sk.configure({output:outf,
		read: builtinRead
	});
	try {
		Sk.importMainWithBody("<stdin>",false,prog);
	} catch (e) {
		document.getElementById("yourcode").value += e + '\n';
	}
}
		</script>
    </body>
</html>
